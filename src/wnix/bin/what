#!/usr/bin/env python3

__all__ = ['main']

import os
import sys
import argparse
import wnix

def main(argv):
    parser = argparse.ArgumentParser('what')
    parser.add_argument('list')
    args = parser.parse_args(argv)

    if os.path.exists(args.list):
        keys = open(args.list).read().splitlines()
    else:
        keys = args.list.split(',')

    q = wnix.stdin_to_tensor()
    ranks = wnix.what(q, keys)
    output = '\n'.join(ranks)
    print(output)

if __name__ == '__main__':
    main(sys.argv[1:])
