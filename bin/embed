#!/usr/bin/env python3

import sys
import wnix
import argparse

MODELS = ['small', 'base', 'large']

parser = argparse.ArgumentParser('embed')
parser.add_argument('path', nargs='?')
parser.add_argument('-s', '--size', choices=MODELS, default='small')
args = parser.parse_args()

model = wnix.embed.Flag(args.size)

if args.path:
    text = open(args.path).read()
else:
    text = sys.stdin.read()

embed = model(text)

sys.stdout.buffer.write(embed)

